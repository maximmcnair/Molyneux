doctype
html(ng-app="myApp")
  head
    meta(charset='utf8')
    base(href='/')
    title Molyneux
    link(rel='stylesheet', href='/css/app.css')
    link(rel='stylesheet', href='//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css')
    link(rel='stylesheet', href='bower_components/font-awesome/css/font-awesome.css')
    link(rel='stylesheet', href='/css/bootstrap.css')
    script.
      var user = '#{userId}'
  body
    header(role="banner").navbar.navbar-default.navbar-fixed-top
      div.container
        nav(role="navigation").collapse.navbar-collapse.bs-navbar-collapse
          ul.nav.navbar-nav
            li
              a(href="/") Tallli.es
            li
              a(href="/projects") Projects
          if username
            ul.nav.navbar-nav.navbar-right
              li
                a(href="/logout", target="_self") Logout
              li
                | Logged in as: 
                img(src="/uploads/#{avatar}")
                | #{username}

    .container
      //- block body
      .row
        div(ng-view).col-md-10
          // App is here
        .col-md-2(ng-controller="OnlineCtrl")
          .well.affix
            h3 {{team.name}} Members Online
            div(ng-repeat='user in users')
              img(src="/uploads/{{team.members[user].avatar}}")
              h5{{user}}

    script(src='/js/lib/jquery-2.0.3.min.js')
    script(src='/socket.io/socket.io.js')
    script(src='/js/lib/angular-file-upload-shim.js')
    script(src='bower_components/underscore/underscore-min.js')
    script(src='bower_components/angular/angular.js')
    script(src='bower_components/angular-socket-io/socket.js')
    script(src='bower_components/angular-bootstrap/ui-bootstrap-tpls.js')
    script(src='/js/lib/angular-file-upload.js')
    script(src='js/app.js')
    script(src='js/services.js')
    script(src='js/controllers/project.js')
    script(src='js/controllers/projects.js')
    script(src='js/controllers/users.js')
    script(src='js/filters.js')
    script(src='js/directives.js')